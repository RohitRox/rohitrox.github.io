
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Lets learn to knockout - Blog @ RohitRox</title>
  <meta name="author" content="Rohit Rox">

  
  <meta name="description" content="Knockout.js is known for rapid and responsive UI development. Lets try it to build something today.
Lets see quick demo of what we are going to build &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rohitrox.github.io/2013/08/18/lets-learn-to-knockout">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Blog @ RohitRox" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Blog @ RohitRox</a></h1>
  
    <h2>tips tricks tuts and everything learned</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rohitrox.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Lets Learn to Knockout</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-08-18T23:55:00-04:00" pubdate data-updated="true">Aug 18<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>Knockout.js is known for rapid and responsive UI development. Lets try it to build something today.
Lets see quick <a href="http://rohitrox.github.io/knockoutjs_projects">demo</a> of what we are going to build.</p>

<p><a href="https://github.com/RohitRox/knockoutjs_projects/archive/master.zip">Download Source</a></p>

<p>This is a basic table that is used in bills or receipts. We will try to add some magic to table like autocomplete, automatic information fill up of selected item and calculation of amounts with the help of knockout.</p>

<p>I will not describe what knockout.js is and why use it.
<a href="http://learn.knockoutjs.com">Learn.knockout.js</a> has an excellent
tutorial for knockout js beginners. I strongly suggest to go through
learn.knockoutjs.com before proceeding.</p>

<p>I assume basic understanding of knockout js from here.</p>

<p>Let&rsquo;s setup the files first. Nothing fancy, I have just used jquery source file and knockout source js from their official websites and I have used twitter bootstrap prettifying stuffs.</p>

<p>I have initial table markup, which looks like as shown below:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>   <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;row&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;span12&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">&quot;table table-bordered&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;thead&gt;</span>
</span><span class='line'>              <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>                <span class="nt">&lt;th&gt;</span>Item<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>                <span class="nt">&lt;th&gt;</span>Description<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>                <span class="nt">&lt;th&gt;</span>Unit Price<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>                <span class="nt">&lt;th&gt;</span>Quantity<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>                <span class="nt">&lt;th&gt;</span>Amount<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>                <span class="nt">&lt;th&gt;</span>Actions<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>              <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/thead&gt;</span>
</span><span class='line'>            <span class="nt">&lt;tbody&gt;</span>
</span><span class='line'>              <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>                <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span3&quot;</span>  <span class="nt">/&gt;&lt;/td&gt;</span>
</span><span class='line'>                <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span4&quot;</span> <span class="nt">/&gt;&lt;/td&gt;</span>
</span><span class='line'>                <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span> <span class="nt">/&gt;&lt;/td&gt;</span>
</span><span class='line'>                <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span> <span class="nt">/&gt;&lt;/td&gt;</span>
</span><span class='line'>                <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span> <span class="nt">/&gt;&lt;/td&gt;</span>
</span><span class='line'>                <span class="nt">&lt;td&gt;&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span><span class="nt">&gt;</span>Remove<span class="nt">&lt;/button&gt;&lt;/td&gt;</span>
</span><span class='line'>              <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>            <span class="nt">&lt;/tbody&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/table&gt;</span>
</span><span class='line'>          <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;pull-left&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span><span class="nt">&gt;</span>Add New Row<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>            <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span><span class="nt">&gt;</span>Save<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>          <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">&quot;pull-right&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>            <span class="nt">&lt;strong&gt;</span>Grand Total: <span class="nt">&lt;span&gt;&lt;/span&gt;</span> <span class="nt">&lt;/strong&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/h4&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/div&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lets see what we have upto here and talk something about what we are trying to do to this table.</p>

<p><img src="/images/blog_post_images/knockout-table-1.png" alt="knockout table 1" /></p>

<p>Lets summarize the behaviours we would like to have:</p>

<ul>
<li>Add a new row</li>
<li>Suggest items in item field</li>
<li>Fill up the item information (description and price) automatically</li>
<li>Calculate the grand total as items are added</li>
<li>A remove button to remove item and re-compute grand total automatically on removal</li>
</ul>


<!-- more -->


<p>Lets assume that we are provided with items json like given below: (we&rsquo;ll not dicuss how come these jsons)</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">var</span> <span class="nx">items_json</span> <span class="o">=</span>
</span><span class='line'>       <span class="p">[{</span><span class="nx">sn</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span><span class="s1">&#39;item_name&#39;</span><span class="o">:</span><span class="s1">&#39;Appy Fruit Juice&#39;</span><span class="p">,</span> <span class="nx">unit_price</span><span class="o">:</span><span class="mi">45</span><span class="p">,</span> <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Apple falvoured fruit juice&#39;</span><span class="p">,</span> <span class="nx">quantity</span><span class="o">:</span> <span class="mi">2</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">sn</span><span class="o">:</span> <span class="mi">2</span><span class="p">,</span><span class="s1">&#39;item_name&#39;</span><span class="o">:</span><span class="s1">&#39;Cadbury Dairy Milk&#39;</span><span class="p">,</span> <span class="nx">unit_price</span><span class="o">:</span><span class="mi">70</span><span class="p">,</span> <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Cadbury Chocolate&#39;</span><span class="p">,</span> <span class="nx">quantity</span><span class="o">:</span> <span class="mi">5</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">sn</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span><span class="s1">&#39;item_name&#39;</span><span class="o">:</span><span class="s1">&#39;Good Day Biscuit&#39;</span><span class="p">,</span> <span class="nx">unit_price</span><span class="o">:</span><span class="mi">20</span><span class="p">,</span> <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Biscuit&#39;</span><span class="p">,</span> <span class="nx">quantity</span><span class="o">:</span> <span class="mi">10</span><span class="p">},</span>
</span><span class='line'>        <span class="p">{</span><span class="nx">sn</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span><span class="s1">&#39;item_name&#39;</span><span class="o">:</span><span class="s1">&#39;Tiger Crunch Biscuit&#39;</span><span class="p">,</span> <span class="nx">unit_price</span><span class="o">:</span><span class="mi">10</span><span class="p">,</span> <span class="nx">description</span><span class="o">:</span> <span class="s1">&#39;Glucose biscuit with choco chips&#39;</span><span class="p">,</span> <span class="nx">quantity</span><span class="o">:</span> <span class="mi">1</span><span class="p">}</span>
</span><span class='line'>        <span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>The json is self explanatory, contains an array of items ( which we assume will be provided by some server-side operation ).</p>

<p>Now our first step, lets create the item model, comments are there to help you out.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">function</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>      <span class="c1">// sets default value of name to &#39;&#39;</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">item_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="c1">// sets default description of name to &#39;&#39; but description is observable</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">unit_price</span><span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">quantity</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>      <span class="c1">// automatic setting of attributes</span>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">item</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">self</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">(</span><span class="nx">item</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next, lets write out ItemViewModel.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="kd">function</span> <span class="nx">ItemViewModel</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>    <span class="c1">// loop over the argument data and create a observableArray of new Item and assign array as items of ItemViewModel</span>
</span><span class='line'>    <span class="nx">self</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observableArray</span><span class="p">(</span><span class="nx">ko</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">arrayMap</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}));</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And finally, apply our bindings.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>   <span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">view_instance</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ItemViewModel</span><span class="p">(</span><span class="nx">items_json</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">ko</span><span class="p">.</span><span class="nx">applyBindings</span><span class="p">(</span><span class="nx">view_instance</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>For this to work, we first need to add data bindings to out table. Our table now becomes</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>     <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">&quot;table table-bordered&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;thead&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>          <span class="nt">&lt;th&gt;</span>Item<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>          <span class="nt">&lt;th&gt;</span>Description<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>          <span class="nt">&lt;th&gt;</span>Unit Price<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>          <span class="nt">&lt;th&gt;</span>Quantity<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>          <span class="nt">&lt;th&gt;</span>Amount<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>          <span class="nt">&lt;th&gt;</span>Actions<span class="nt">&lt;/th&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/thead&gt;</span>
</span><span class='line'>      <span class="nt">&lt;tbody</span> <span class="na">data-bind=</span><span class="s">&#39;foreach: items&#39;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span3&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: item_name&quot;</span><span class="nt">/&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span4&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: description&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: unit_price&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: quantity&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span><span class="nt">&gt;</span>Remove<span class="nt">&lt;/button&gt;&lt;/td&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/tbody&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/table&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now, if we run in browser, we&rsquo;ll get the json data populated in the table. But still the amount field and grand total are empty. Lets fix them.</p>

<p>To compute those, we&rsquo;ll add amount method to Item model, that will calculate amout (price * quantity) for corresponding model and grand total method to ItemViewModel for calculating grand total of all items.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'>    <span class="kd">function</span> <span class="nx">ItemViewModel</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">items</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observableArray</span><span class="p">(</span><span class="nx">ko</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">arrayMap</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">new</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</span><span class='line'>      <span class="p">}));</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">grand_total</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>        <span class="nx">self</span><span class="p">.</span><span class="nx">items</span><span class="p">().</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">){</span>
</span><span class='line'>            <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">i</span><span class="p">.</span><span class="nx">amount</span><span class="p">();</span>
</span><span class='line'>        <span class="p">});</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">sum</span><span class="p">;</span>
</span><span class='line'>      <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">function</span> <span class="nx">Item</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
</span><span class='line'>      <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">item_name</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">unit_price</span><span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">quantity</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">item</span><span class="p">)</span>
</span><span class='line'>        <span class="nx">self</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">observable</span><span class="p">(</span><span class="nx">item</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'>      <span class="nx">self</span><span class="p">.</span><span class="nx">amount</span> <span class="o">=</span> <span class="nx">ko</span><span class="p">.</span><span class="nx">computed</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>        <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">quantity</span><span class="p">()</span> <span class="o">*</span> <span class="nx">self</span><span class="p">.</span><span class="nx">unit_price</span><span class="p">();</span>
</span><span class='line'>      <span class="p">});</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>And the markup</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>     <span class="nt">&lt;table</span> <span class="na">class=</span><span class="s">&quot;table table-bordered&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;thead&gt;</span>
</span><span class='line'>       ...
</span><span class='line'>      <span class="nt">&lt;/thead&gt;</span>
</span><span class='line'>      <span class="nt">&lt;tbody</span> <span class="na">data-bind=</span><span class="s">&#39;foreach: items&#39;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;tr&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span3&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: item_name&quot;</span> <span class="nt">/&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span4&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: description&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: unit_price&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: quantity&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;input</span> <span class="na">class=</span><span class="s">&quot;span1&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;value: amount()&quot;</span><span class="nt">&gt;&lt;/td&gt;</span>
</span><span class='line'>          <span class="nt">&lt;td&gt;&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span><span class="nt">&gt;</span>Remove<span class="nt">&lt;/button&gt;&lt;/td&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/tr&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/tbody&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/table&gt;</span>
</span><span class='line'>    <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;pull-left&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span><span class="nt">&gt;</span>Add New Row<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>      <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span><span class="nt">&gt;</span>Save<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/p&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h4</span> <span class="na">class=</span><span class="s">&quot;pull-right&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;strong&gt;</span>Grand Total: <span class="nt">&lt;span</span> <span class="na">data-bind=</span><span class="s">&quot;text: grand_total()&quot;</span><span class="nt">&gt;&lt;/span&gt;</span> <span class="nt">&lt;/strong&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/h4&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note, grand_total is straight forward but amount is computed, an operation on quantity and unit_price, which are observables, this will do the magic of automatic managing the calculations of amount and grand total for us. You can try by changing values of price or quantity.</p>

<p>Also, note grand_total is called from outside the foreach binding, and thus will be found in ItemViewModel and amount is called inside the loop, thus will call the model method.</p>

<p>Now, lets do the add, remove and save part. For save, we wont do any server-side stuffs but alert the raw json output which would be sent to server.</p>

<p>We&rsquo;ll add these methods to ItemViewModel.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">self</span><span class="p">.</span><span class="nx">addItem</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'><span class="nx">self</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">Item</span><span class="p">());</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">self</span><span class="p">.</span><span class="nx">removeItem</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">item</span><span class="p">){</span>
</span><span class='line'><span class="nx">self</span><span class="p">.</span><span class="nx">items</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">item</span><span class="p">);</span>
</span><span class='line'>  <span class="p">};</span>
</span><span class='line'>
</span><span class='line'>  <span class="nx">self</span><span class="p">.</span><span class="nx">save</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'><span class="nx">alert</span><span class="p">(</span><span class="nx">ko</span><span class="p">.</span><span class="nx">toJSON</span><span class="p">(</span><span class="nx">self</span><span class="p">));</span>
</span><span class='line'>  <span class="p">};</span>
</span></code></pre></td></tr></table></div></figure>


<p>And markup:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;click: $root.removeItem&quot;</span><span class="nt">&gt;</span>Remove<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>...
</span><span class='line'><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;click: addItem&quot;</span><span class="nt">&gt;</span>Add New Row<span class="nt">&lt;/button&gt;</span>
</span><span class='line'><span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">&quot;btn&quot;</span> <span class="na">data-bind=</span><span class="s">&quot;click: save&quot;</span><span class="nt">&gt;</span>Save<span class="nt">&lt;/button&gt;</span>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>The post is getting too long, so I am just escaping other markups and presenting on ones where we need to change.
As the methods are in ItemViewModel, the add and save button would work, but remove button being inside the loop, will have to do $root.removeItem . Being called inside loop, removeItem will get the corresponding model as its argument.</p>

<p>Now, if we run in the browser, magicaly we have all the functionality. The items being observableArray, the table is automtically updated when items are added or deleted.</p>

<p>We have not written any click bindings, as we would normally do using jquery nor DOM manipulation, just few data-bind and knockout observables, knockout knocks it all out.</p>

<p>That&rsquo;s all for this post.</p>

<p>In next part, We&rsquo;ll add bootstrap&rsquo;s typeahead or autocomplete feature and implement technique for updating the information of item selected via autocomplete.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Rohit Rox</span></span>

      








  


<time datetime="2013-08-18T23:55:00-04:00" pubdate data-updated="true">Aug 18<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/knockoutjs/'>KnockoutJs</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://rohitrox.github.io/2013/08/18/lets-learn-to-knockout/" data-via="roxxypoxxy" data-counturl="http://rohitrox.github.io/2013/08/18/lets-learn-to-knockout/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2013/07/19/canvas-images-and-rails/" title="Previous Post: Canvas Images and Rails">&laquo; Canvas Images and Rails</a>
      
      
        <a class="basic-alignment right" href="/2013/08/23/get-selected-text-from-webpage/" title="Next Post: Get Selected text from Web Page">Get Selected text from Web Page &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>About Me</h1>
  <p class="my_json">
	<span class="curly">{</span><br />
	&nbsp;<span class="key">me:</span> <span class="val">Rohit Joshi from Kathmandu, Nepal</span>,<br />
	&nbsp;<span class="key">profession: {<br />
		&nbsp;&nbsp;<span class="key">web_developer:</span> <span class="val">["Ruby on Rails", "Javascript"]</span><br />
	&nbsp;},<br />
	&nbsp;<span class="key">email:</span> <a href="mailto:link2j.roy@gmail.com" target="_blank">link2j.roy@gmail.com</a>,<br />
	&nbsp;<span class="key">twitter:</span> <a href="http://twitter.com/roxxypoxxy" target="_blank">@roxxypoxxy</a>,<br />
	&nbsp;<span class="key">github:</span> <a href="http://github.com/rohitrox" target="_blank">rohitrox</a>,<br />
	&nbsp;<span class="key">web:</span> <a href="http://rohitjoshi.com.np" target="_blank">http://rohitjoshi.com.np</a><br />
	<span class="curly">}</span>
  </p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2015/06/23/rails-api-backed-with-jwt/">Rails Api Backed With Jwt</a>
      </li>
    
      <li class="post">
        <a href="/2014/12/06/embercli-and-rails-and-beyond/">Ember Cli and Rails and Beyond</a>
      </li>
    
      <li class="post">
        <a href="/2014/03/16/emberjs-and-highcharts/">Emberjs and Highcharts</a>
      </li>
    
      <li class="post">
        <a href="/2014/02/20/hangman-game-with-emberjs/">Hangman Game With Emberjs</a>
      </li>
    
      <li class="post">
        <a href="/2013/09/05/javascript-array-tricks/">Javascript Array Tricks</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li class='category'><a href='/blog/categories/api/'>Api (1)</a></li>
<li class='category'><a href='/blog/categories/canvas/'>Canvas (1)</a></li>
<li class='category'><a href='/blog/categories/embercli/'>EmberCli (1)</a></li>
<li class='category'><a href='/blog/categories/emberjs/'>EmberJs (2)</a></li>
<li class='category'><a href='/blog/categories/html5/'>HTML5 (1)</a></li>
<li class='category'><a href='/blog/categories/jquery/'>JQuery (2)</a></li>
<li class='category'><a href='/blog/categories/jwt/'>JWT (1)</a></li>
<li class='category'><a href='/blog/categories/javascript/'>Javascript (6)</a></li>
<li class='category'><a href='/blog/categories/knockoutjs/'>KnockoutJs (1)</a></li>
<li class='category'><a href='/blog/categories/metaprogramming/'>Metaprogramming (1)</a></li>
<li class='category'><a href='/blog/categories/mongoid/'>Mongoid (1)</a></li>
<li class='category'><a href='/blog/categories/mysql/'>MySQL (2)</a></li>
<li class='category'><a href='/blog/categories/rails/'>Rails (6)</a></li>
<li class='category'><a href='/blog/categories/ruby/'>Ruby (4)</a></li>
<li class='category'><a href='/blog/categories/ubuntu/'>Ubuntu (1)</a></li>
<li class='category'><a href='/blog/categories/vim/'>Vim (1)</a></li>
<li class='category'><a href='/blog/categories/emberjs/'>emberjs (1)</a></li>
<li class='category'><a href='/blog/categories/highcharts/'>highcharts (1)</a></li>
</ul>
</section><a class="twitter-timeline" href="https://twitter.com/roxxypoxxy" data-widget-id="365563816915902464" data-tweet-limit="5">Tweets</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Rohit Rox -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'webdevelopmentlog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rohitrox.github.io/2013/08/18/lets-learn-to-knockout/';
        var disqus_url = 'http://rohitrox.github.io/2013/08/18/lets-learn-to-knockout/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
